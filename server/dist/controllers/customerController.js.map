{"version":3,"sources":["../../src/controllers/customerController.js"],"names":["customerController","Customer","get","req","res","find","err","customers","status","send","_customers","map","customer","i","newCustomer","toJSON","links","self","headers","host","_id","json","post","body","console","log","name","save","module","exports"],"mappings":";;AACA;;;AAGA,IAAMA,qBAAqB,SAArBA,kBAAqB,CAACC,QAAD,EAAc;;AAErC,QAAMC,MAAM,SAANA,GAAM,CAACC,GAAD,EAAMC,GAAN,EAAc;;AAEtBH,iBAASI,IAAT,CAAc,UAACC,GAAD,EAAMC,SAAN,EAAoB;AAC9B,gBAAID,GAAJ,EAAQ;AACJF,oBAAII,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAEO;;AAEH,oBAAII,aAAaH,UAAUI,GAAV,CAAc,UAACC,QAAD,EAAWC,CAAX,EAAiB;AAC5C,wBAAIC,cAAcF,SAASG,MAAT,EAAlB;AACA;AACAD,gCAAYE,KAAZ,GAAoB,EAApB;AACAF,gCAAYE,KAAZ,CAAkBC,IAAlB,eAAmCd,IAAIe,OAAJ,CAAYC,IAA/C,uBAAqEL,YAAYM,GAAjF;;AAEA,2BAAON,WAAP;AAEH,iBARgB,CAAjB;AASAV,oBAAIiB,IAAJ,CAASX,UAAT;AACH;AACJ,SAhBD;AAiBH,KAnBD;;AAqBA,QAAMY,OAAO,SAAPA,IAAO,CAACnB,GAAD,EAAMC,GAAN,EAAc;;AAEvB,YAAIQ,WAAW,IAAIX,QAAJ,CAAaE,IAAIoB,IAAjB,CAAf;AACAC,gBAAQC,GAAR,CAAYb,QAAZ;;AAEA,YAAI,CAACT,IAAIoB,IAAJ,CAASG,IAAd,EAAoB;AAChBtB,gBAAII,MAAJ,CAAW,GAAX;AACAJ,gBAAIK,IAAJ,CAAS,mBAAT;AACH,SAHD,MAGO;;AAEHG,qBAASe,IAAT;AACAvB,gBAAII,MAAJ,CAAW,GAAX;AACAJ,gBAAIK,IAAJ,CAASG,QAAT;AACH;AACJ,KAdD;;AAgBA,WAAO,EAAEV,QAAF,EAAOoB,UAAP,EAAP;AACH,CAxCD;;AA0CAM,OAAOC,OAAP,GAAiB7B,kBAAjB","file":"customerController.js","sourcesContent":["\r\n/**\r\n * @param (Mongoose Object)\r\n * */\r\nconst customerController = (Customer) => {\r\n\r\n    const get = (req, res) => {\r\n\r\n        Customer.find((err, customers) => {\r\n            if (err){\r\n                res.status(500).send(err)\r\n            } else {\r\n\r\n                let _customers = customers.map((customer, i) => {\r\n                    let newCustomer = customer.toJSON()\r\n                    // hateos\r\n                    newCustomer.links = {}\r\n                    newCustomer.links.self = `http://${req.headers.host}/api/customers/${newCustomer._id}`\r\n\r\n                    return newCustomer\r\n\r\n                })\r\n                res.json(_customers)\r\n            }\r\n        })\r\n    }\r\n\r\n    const post = (req, res) => {\r\n\r\n        let customer = new Customer(req.body)\r\n        console.log(customer)\r\n\r\n        if (!req.body.name) {\r\n            res.status(400)\r\n            res.send('customer required')\r\n        } else {\r\n\r\n            customer.save()\r\n            res.status(200)\r\n            res.send(customer)\r\n        }\r\n    }\r\n\r\n    return { get, post }\r\n}\r\n\r\nmodule.exports = customerController"]}