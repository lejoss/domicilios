{"version":3,"sources":["../../src/controllers/orderController.js"],"names":["orderController","Order","get","req","res","find","err","orders","status","send","returnOrders","forEach","order","i","newOrder","toJSON","links","self","headers","host","_id","push","json","post","body","console","log","customer","save","module","exports"],"mappings":";;AAAA;;;;AAIA,IAAMA,kBAAkB,SAAlBA,eAAkB,CAACC,KAAD,EAAW;;AAE/B,QAAMC,MAAM,SAANA,GAAM,CAACC,GAAD,EAAMC,GAAN,EAAc;;AAEtBH,cAAMI,IAAN,CAAW,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACxB,gBAAID,GAAJ,EAAQ;AACJF,oBAAII,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAEO;;AAEH,oBAAII,eAAe,EAAnB;;AAEAH,uBAAOI,OAAP,CAAe,UAACC,KAAD,EAAQC,CAAR,EAAc;AACzB,wBAAIC,WAAWF,MAAMG,MAAN,EAAf;AACAD,6BAASE,KAAT,GAAiB,EAAjB;AACAF,6BAASE,KAAT,CAAeC,IAAf,GAAuB,YAAYd,IAAIe,OAAJ,CAAYC,IAAxB,GAA+B,cAA/B,GAAgDL,SAASM,GAAhF;AACAV,iCAAaW,IAAb,CAAkBP,QAAlB;AACH,iBALD;;AAOAV,oBAAIkB,IAAJ,CAASZ,YAAT;AACH;AACJ,SAhBD;AAiBH,KAnBD;;AAqBA,QAAMa,OAAO,SAAPA,IAAO,CAACpB,GAAD,EAAMC,GAAN,EAAc;;AAEvB,YAAIQ,QAAQ,IAAIX,KAAJ,CAAUE,IAAIqB,IAAd,CAAZ;AACAC,gBAAQC,GAAR,CAAYd,KAAZ;;AAEA,YAAI,CAACT,IAAIqB,IAAJ,CAASG,QAAd,EAAwB;AACpBvB,gBAAII,MAAJ,CAAW,GAAX;AACAJ,gBAAIK,IAAJ,CAAS,mBAAT;AACH,SAHD,MAGO;;AAEHG,kBAAMgB,IAAN;AACAxB,gBAAII,MAAJ,CAAW,GAAX;AACAJ,gBAAIK,IAAJ,CAASG,KAAT;AACH;AACJ,KAdD;;AAgBA,WAAO,EAAEV,QAAF,EAAOqB,UAAP,EAAP;AAEH,CAzCD;;AA2CAM,OAAOC,OAAP,GAAiB9B,eAAjB","file":"orderController.js","sourcesContent":["/**\r\n * @param (Mongoose Object)\r\n *\r\n * */\r\nconst orderController = (Order) => {\r\n\r\n    const get = (req, res) => {\r\n\r\n        Order.find((err, orders) => {\r\n            if (err){\r\n                res.status(500).send(err)\r\n            } else {\r\n\r\n                let returnOrders = []\r\n\r\n                orders.forEach((order, i) => {\r\n                    let newOrder = order.toJSON()\r\n                    newOrder.links = {}\r\n                    newOrder.links.self =  'http://' + req.headers.host + '/api/orders/' + newOrder._id;\r\n                    returnOrders.push(newOrder);\r\n                })\r\n\r\n                res.json(returnOrders)\r\n            }\r\n        })\r\n    }\r\n\r\n    const post = (req, res) => {\r\n\r\n        let order = new Order(req.body)\r\n        console.log(order)\r\n\r\n        if (!req.body.customer) {\r\n            res.status(400)\r\n            res.send('customer required')\r\n        } else {\r\n\r\n            order.save()\r\n            res.status(200)\r\n            res.send(order)\r\n        }\r\n    }\r\n\r\n    return { get, post }\r\n\r\n}\r\n\r\nmodule.exports = orderController"]}