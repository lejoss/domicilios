{"version":3,"sources":["../../src/controllers/restaurantController.js"],"names":["restaurantController","Restaurant","get","req","res","find","err","restaurants","status","send","returnRestaurants","forEach","restaurant","i","newRestaurant","toJSON","links","self","headers","host","_id","push","json","post","body","name","save","module","exports"],"mappings":";;AAAA;;;;;;AAEA;;;AAGA,IAAMA,uBAAuB,SAAvBA,oBAAuB,CAACC,UAAD,EAAgB;;AAEzC,QAAMC,MAAM,SAANA,GAAM,CAACC,GAAD,EAAMC,GAAN,EAAc;;AAGtBH,mBAAWI,IAAX,CAAgB,UAACC,GAAD,EAAMC,WAAN,EAAsB;AAClC,gBAAID,GAAJ,EAAQ;AACJF,oBAAII,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAEO;;AAEH,oBAAII,oBAAoB,EAAxB;;AAEAH,4BAAYI,OAAZ,CAAoB,UAACC,UAAD,EAAaC,CAAb,EAAmB;AACnC,wBAAIC,gBAAgBF,WAAWG,MAAX,EAApB;AACAD,kCAAcE,KAAd,GAAsB,EAAtB;AACAF,kCAAcE,KAAd,CAAoBC,IAApB,GAA4B,YAAYd,IAAIe,OAAJ,CAAYC,IAAxB,GAA+B,mBAA/B,GAAqDL,cAAcM,GAA/F;AACAV,sCAAkBW,IAAlB,CAAuBP,aAAvB;AACH,iBALD;AAMAV,oBAAIkB,IAAJ,CAASZ,iBAAT;AACH;AACJ,SAfD;AAgBH,KAnBD;;AAqBA,QAAMa,OAAO,SAAPA,IAAO,CAACpB,GAAD,EAAMC,GAAN,EAAc;;AAEvB,YAAIQ,aAAa,IAAIX,UAAJ,CAAeE,IAAIqB,IAAnB,CAAjB;;AAEA,YAAI,CAACrB,IAAIqB,IAAJ,CAASC,IAAd,EAAoB;AAChBrB,gBAAII,MAAJ,CAAW,GAAX;AACAJ,gBAAIK,IAAJ,CAAS,0BAAT;AACH,SAHD,MAGO;AACHG,uBAAWc,IAAX;AACAtB,gBAAII,MAAJ,CAAW,GAAX;AACAJ,gBAAIK,IAAJ,CAASG,UAAT;AACH;AACJ,KAZD;;AAcA,WAAO,EAAEV,QAAF,EAAOqB,UAAP,EAAP;AACH,CAtCD;;AAwCAI,OAAOC,OAAP,GAAiB5B,oBAAjB","file":"restaurantController.js","sourcesContent":["import fs from 'fs'\r\n\r\n/**\r\n * @param (Mongoose Object)\r\n * */\r\nconst restaurantController = (Restaurant) => {\r\n\r\n    const get = (req, res) => {\r\n\r\n\r\n        Restaurant.find((err, restaurants) => {\r\n            if (err){\r\n                res.status(500).send(err)\r\n            } else {\r\n\r\n                let returnRestaurants = []\r\n\r\n                restaurants.forEach((restaurant, i) => {\r\n                    let newRestaurant = restaurant.toJSON()\r\n                    newRestaurant.links = {}\r\n                    newRestaurant.links.self =  'http://' + req.headers.host + '/api/restaurants/' + newRestaurant._id\r\n                    returnRestaurants.push(newRestaurant)\r\n                })\r\n                res.json(returnRestaurants)\r\n            }\r\n        })\r\n    }\r\n\r\n    const post = (req, res) => {\r\n\r\n        let restaurant = new Restaurant(req.body)\r\n\r\n        if (!req.body.name) {\r\n            res.status(400)\r\n            res.send('Restaurant name required')\r\n        } else {\r\n            restaurant.save()\r\n            res.status(200)\r\n            res.send(restaurant)\r\n        }\r\n    }\r\n\r\n    return { get, post }\r\n}\r\n\r\nmodule.exports = restaurantController\r\n\r\n"]}