{"version":3,"sources":["../../src/routes/customerRoutes.js"],"names":["routes","Customer","customerRouter","Router","customerCtrl","route","post","get","use","req","res","next","findById","params","customerId","err","customer","status","send","returnCustomer","toJSON","links","json","module","exports"],"mappings":";;AAIA;;;;AACA;;;;;;AALA;;;;AAOA,IAAMA,SAAS,SAATA,MAAS,CAACC,QAAD,EAAc;;AAEzB,QAAMC,iBAAiB,kBAAQC,MAAR,EAAvB;AACA,QAAMC,eAAiB,kCAAmBH,QAAnB,CAAvB;;AAEAC,mBAAeG,KAAf,CAAqB,GAArB,EACKC,IADL,CACUF,aAAaE,IADvB,EAEKC,GAFL,CAESH,aAAaG,GAFtB;;AAIAL,mBAAeM,GAAf,CAAmB,cAAnB,EAAmC,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACnDV,iBAASW,QAAT,CAAkBH,IAAII,MAAJ,CAAWC,UAA7B,EAAyC,UAACC,GAAD,EAAMC,QAAN,EAAmB;AACxD,gBAAID,GAAJ,EAAS;AACLL,oBAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAEO,IAAIC,QAAJ,EAAc;AACjBP,oBAAIO,QAAJ,GAAeA,QAAf;AACAL;AACH,aAHM,MAGA;AACHD,oBAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,mBAArB;AACH;AACJ,SATD;AAUH,KAXD;;AAaAhB,mBAAeG,KAAf,CAAqB,cAArB,EACKE,GADL,CACS,UAACE,GAAD,EAAMC,GAAN,EAAc;AACf,YAAIS,iBAAiBV,IAAIO,QAAJ,CAAaI,MAAb,EAArB;;AAEAD,uBAAeE,KAAf,GAAsB,EAAtB;AACAX,YAAIY,IAAJ,CAASH,cAAT;AACH,KANL;;AAQA,WAAOjB,cAAP;AACH,CA/BD;;AAiCAqB,OAAOC,OAAP,GAAiBxB,MAAjB","file":"customerRoutes.js","sourcesContent":["/**\r\n * Created by lejoss on 7/30/16.\r\n */\r\n\r\nimport express from 'express'\r\nimport customerController from '../controllers/customerController'\r\n\r\nconst routes = (Customer) => {\r\n\r\n    const customerRouter = express.Router()\r\n    const customerCtrl   = customerController(Customer)\r\n\r\n    customerRouter.route('/')\r\n        .post(customerCtrl.post)\r\n        .get(customerCtrl.get)\r\n\r\n    customerRouter.use('/:customerId', (req, res, next) => {\r\n        Customer.findById(req.params.customerId, (err, customer) => {\r\n            if (err) {\r\n                res.status(500).send(err)\r\n            } else if (customer) {\r\n                req.customer = customer\r\n                next()\r\n            } else {\r\n                res.status(404).send('no customer found')\r\n            }\r\n        })\r\n    })\r\n\r\n    customerRouter.route('/:customerId')\r\n        .get((req, res) => {\r\n            let returnCustomer = req.customer.toJSON()\r\n\r\n            returnCustomer.links ={}\r\n            res.json(returnCustomer)\r\n        })\r\n\r\n    return customerRouter\r\n}\r\n\r\nmodule.exports = routes"]}