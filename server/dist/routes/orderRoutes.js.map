{"version":3,"sources":["../../src/routes/orderRoutes.js"],"names":["routes","Order","orderRouter","Router","orderCtrl","route","post","get","use","req","res","next","findById","params","orderId","err","order","status","send","returnOrder","toJSON","links","json","module","exports"],"mappings":";;AAIA;;;;AACA;;;;;;AALA;;;;AAOA,IAAMA,SAAS,SAATA,MAAS,CAACC,KAAD,EAAW;;AAEtB,QAAMC,cAAc,kBAAQC,MAAR,EAApB;AACA,QAAMC,YAAc,+BAAgBH,KAAhB,CAApB;;AAEAC,gBAAYG,KAAZ,CAAkB,GAAlB,EACKC,IADL,CACUF,UAAUE,IADpB,EAEKC,GAFL,CAESH,UAAUG,GAFnB;;AAIAL,gBAAYM,GAAZ,CAAgB,WAAhB,EAA6B,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC7CV,cAAMW,QAAN,CAAeH,IAAII,MAAJ,CAAWC,OAA1B,EAAmC,UAACC,GAAD,EAAMC,KAAN,EAAgB;AAC/C,gBAAID,GAAJ,EAAS;AACLL,oBAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,GAArB;AACH,aAFD,MAEO,IAAIC,KAAJ,EAAW;AACdP,oBAAIO,KAAJ,GAAYA,KAAZ;AACAL;AACH,aAHM,MAGA;AACHD,oBAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,gBAArB;AACH;AACJ,SATD;AAUH,KAXD;;AAaAhB,gBAAYG,KAAZ,CAAkB,WAAlB,EACKE,GADL,CACS,UAACE,GAAD,EAAMC,GAAN,EAAc;AACf,YAAIS,cAAcV,IAAIO,KAAJ,CAAUI,MAAV,EAAlB;;AAEAD,oBAAYE,KAAZ,GAAoB,EAApB;AACAX,YAAIY,IAAJ,CAASH,WAAT;AACH,KANL;;AAQA,WAAOjB,WAAP;AACH,CA/BD;;AAiCAqB,OAAOC,OAAP,GAAiBxB,MAAjB","file":"orderRoutes.js","sourcesContent":["/**\r\n * Created by lejoss on 7/30/16.\r\n */\r\n\r\nimport express from 'express'\r\nimport orderController from '../controllers/orderController'\r\n\r\nconst routes = (Order) => {\r\n\r\n    const orderRouter = express.Router()\r\n    const orderCtrl   = orderController(Order)\r\n\r\n    orderRouter.route('/')\r\n        .post(orderCtrl.post)\r\n        .get(orderCtrl.get)\r\n\r\n    orderRouter.use('/:orderId', (req, res, next) => {\r\n        Order.findById(req.params.orderId, (err, order) => {\r\n            if (err) {\r\n                res.status(500).send(err)\r\n            } else if (order) {\r\n                req.order = order\r\n                next()\r\n            } else {\r\n                res.status(404).send('no order found')\r\n            }\r\n        })\r\n    })\r\n\r\n    orderRouter.route('/:orderId')\r\n        .get((req, res) => {\r\n            let returnOrder = req.order.toJSON()\r\n\r\n            returnOrder.links = {}\r\n            res.json(returnOrder)\r\n        })\r\n\r\n    return orderRouter\r\n}\r\n\r\nmodule.exports = routes"]}